{"ast":null,"code":"import _toConsumableArray from\"C:/it-incubator/Hometask 1-13/hws2/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/it-incubator/Hometask 1-13/hws2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import{message0}from'../HW1';import s from'./MessageSender.module.css';// компонента, которая тестирует вашу компоненту (не изменять, any не трогать)\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MessageSender=function MessageSender(props){var M=props.M;var textareaRef=useRef(null);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),text=_useState4[0],setText=_useState4[1];var onChange=function onChange(e){setText(e.currentTarget.value);};useEffect(function(){if(textareaRef!==null&&textareaRef!==void 0&&textareaRef.current){textareaRef.current.style.height='0px';textareaRef.current.style.height=textareaRef.current.scrollHeight+'px';}},[text]);var addMessage=function addMessage(){setMessages([].concat(_toConsumableArray(messages),[{id:messages.length?messages.length+1:1,user:message0.user,message:{text:text,time:new Date().toTimeString().slice(0,5)}}]));setTimeout(function(){return setText('');},4);};var onKeyDown=function onKeyDown(e){e.key==='Enter'&&e.shiftKey&&addMessage();};return/*#__PURE__*/_jsxs(_Fragment,{children:[messages.map(function(m){return/*#__PURE__*/_jsx(M,{message:m},'message'+m.id);}),/*#__PURE__*/_jsxs(\"div\",{id:'hw1-send-message-form',className:s.sendForm,children:[/*#__PURE__*/_jsx(\"textarea\",{id:'hw1-textarea',className:s.textarea,ref:textareaRef,title:'Shift+Enter for send',placeholder:'Type your message',value:text,onChange:onChange,onKeyDown:onKeyDown}),/*#__PURE__*/_jsx(\"button\",{id:'hw1-button',className:s.button,onClick:addMessage,children:\"Send\"})]})]});};export default MessageSender;","map":{"version":3,"names":["React","useEffect","useRef","useState","message0","s","MessageSender","props","M","textareaRef","messages","setMessages","text","setText","onChange","e","currentTarget","value","current","style","height","scrollHeight","addMessage","id","length","user","message","time","Date","toTimeString","slice","setTimeout","onKeyDown","key","shiftKey","map","m","sendForm","textarea","button"],"sources":["C:/it-incubator/Hometask 1-13/hws2/src/s2-homeworks/hw01/message-sender/MessageSender.tsx"],"sourcesContent":["import React, {useEffect, useRef, useState} from 'react'\r\nimport { message0 } from '../HW1'\r\nimport s from './MessageSender.module.css'\r\n\r\n// компонента, которая тестирует вашу компоненту (не изменять, any не трогать)\r\nconst MessageSender = (props: any) => {\r\n    const M = props.M\r\n    const textareaRef = useRef<HTMLTextAreaElement | null>(null);\r\n    const [messages, setMessages] = useState<any[]>([])\r\n    const [text, setText] = useState<any>('')\r\n\r\n    const onChange = (e: any) => {\r\n        setText(e.currentTarget.value)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (textareaRef?.current) {\r\n            textareaRef.current.style.height = '0px'\r\n            textareaRef.current.style.height = textareaRef.current.scrollHeight + 'px'\r\n        }\r\n    }, [text])\r\n\r\n    const addMessage = () => {\r\n        setMessages([\r\n            ...messages,\r\n            {\r\n                id: messages.length ? messages.length + 1 : 1,\r\n                user: message0.user,\r\n                message: {\r\n                    text,\r\n                    time: new Date().toTimeString().slice(0, 5),\r\n                },\r\n            },\r\n        ])\r\n        setTimeout(() => setText(''), 4)\r\n    }\r\n\r\n    const onKeyDown = (e: any) => {\r\n        e.key === 'Enter' && e.shiftKey && addMessage()\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {messages.map((m) => (\r\n                <M key={'message' + m.id} message={m} />\r\n            ))}\r\n\r\n            <div id={'hw1-send-message-form'} className={s.sendForm}>\r\n                <textarea\r\n                    id={'hw1-textarea'}\r\n                    className={s.textarea}\r\n                    ref={textareaRef}\r\n\r\n                    title={'Shift+Enter for send'}\r\n                    placeholder={'Type your message'}\r\n                    value={text}\r\n\r\n                    onChange={onChange}\r\n                    onKeyDown={onKeyDown}\r\n                />\r\n                <button\r\n                    id={'hw1-button'}\r\n                    className={s.button}\r\n\r\n                    onClick={addMessage}\r\n                >\r\n                    {/*текст кнопки могут изменить студенты*/}\r\n                    Send\r\n                    {/**/}\r\n                </button>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MessageSender\r\n"],"mappings":"wPAAA,MAAOA,MAAP,EAAeC,SAAf,CAA0BC,MAA1B,CAAkCC,QAAlC,KAAiD,OAAjD,CACA,OAASC,QAAT,KAAyB,QAAzB,CACA,MAAOC,EAAP,KAAc,4BAAd,CAEA;6IACA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAACC,KAAD,CAAgB,CAClC,GAAMC,EAAC,CAAGD,KAAK,CAACC,CAAhB,CACA,GAAMC,YAAW,CAAGP,MAAM,CAA6B,IAA7B,CAA1B,CACA,cAAgCC,QAAQ,CAAQ,EAAR,CAAxC,wCAAOO,QAAP,eAAiBC,WAAjB,eACA,eAAwBR,QAAQ,CAAM,EAAN,CAAhC,yCAAOS,IAAP,eAAaC,OAAb,eAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,CAACC,CAAD,CAAY,CACzBF,OAAO,CAACE,CAAC,CAACC,aAAF,CAAgBC,KAAjB,CAAP,CACH,CAFD,CAIAhB,SAAS,CAAC,UAAM,CACZ,GAAIQ,WAAJ,SAAIA,WAAJ,WAAIA,WAAW,CAAES,OAAjB,CAA0B,CACtBT,WAAW,CAACS,OAAZ,CAAoBC,KAApB,CAA0BC,MAA1B,CAAmC,KAAnC,CACAX,WAAW,CAACS,OAAZ,CAAoBC,KAApB,CAA0BC,MAA1B,CAAmCX,WAAW,CAACS,OAAZ,CAAoBG,YAApB,CAAmC,IAAtE,CACH,CACJ,CALQ,CAKN,CAACT,IAAD,CALM,CAAT,CAOA,GAAMU,WAAU,CAAG,QAAbA,WAAa,EAAM,CACrBX,WAAW,8BACJD,QADI,GAEP,CACIa,EAAE,CAAEb,QAAQ,CAACc,MAAT,CAAkBd,QAAQ,CAACc,MAAT,CAAkB,CAApC,CAAwC,CADhD,CAEIC,IAAI,CAAErB,QAAQ,CAACqB,IAFnB,CAGIC,OAAO,CAAE,CACLd,IAAI,CAAJA,IADK,CAELe,IAAI,CAAE,GAAIC,KAAJ,GAAWC,YAAX,GAA0BC,KAA1B,CAAgC,CAAhC,CAAmC,CAAnC,CAFD,CAHb,CAFO,GAAX,CAWAC,UAAU,CAAC,iBAAMlB,QAAO,CAAC,EAAD,CAAb,EAAD,CAAoB,CAApB,CAAV,CACH,CAbD,CAeA,GAAMmB,UAAS,CAAG,QAAZA,UAAY,CAACjB,CAAD,CAAY,CAC1BA,CAAC,CAACkB,GAAF,GAAU,OAAV,EAAqBlB,CAAC,CAACmB,QAAvB,EAAmCZ,UAAU,EAA7C,CACH,CAFD,CAIA,mBACI,2BACKZ,QAAQ,CAACyB,GAAT,CAAa,SAACC,CAAD,qBACV,KAAC,CAAD,EAA0B,OAAO,CAAEA,CAAnC,EAAQ,UAAYA,CAAC,CAACb,EAAtB,CADU,EAAb,CADL,cAKI,aAAK,EAAE,CAAE,uBAAT,CAAkC,SAAS,CAAElB,CAAC,CAACgC,QAA/C,wBACI,iBACI,EAAE,CAAE,cADR,CAEI,SAAS,CAAEhC,CAAC,CAACiC,QAFjB,CAGI,GAAG,CAAE7B,WAHT,CAKI,KAAK,CAAE,sBALX,CAMI,WAAW,CAAE,mBANjB,CAOI,KAAK,CAAEG,IAPX,CASI,QAAQ,CAAEE,QATd,CAUI,SAAS,CAAEkB,SAVf,EADJ,cAaI,eACI,EAAE,CAAE,YADR,CAEI,SAAS,CAAE3B,CAAC,CAACkC,MAFjB,CAII,OAAO,CAAEjB,UAJb,kBAbJ,GALJ,GADJ,CAgCH,CApED,CAsEA,cAAehB,cAAf"},"metadata":{},"sourceType":"module"}